# coding=utf-8
import requests
import json
import os
import time
from requests_toolbelt  import MultipartEncoder
import random



headers = {

        #'Authorization': '89d84756c7f42832eb69950fd56003211c7f3f35dd4b29f4b5760fff8c6906c8569756c32786b20ef537c212b4c6de8b436ea44d88447a03fcd038b48dd5517bbab9aabfc223ca1841f2e8912621beeb2a9b7dac3351299ba2be578116b594c1e39bbb97463285f54da62bbe7527eeefa3a505cc4ca12dcede729fc980e81dffe19df8c64233171d4226304dc0555f8cbbd6805b3e4ebe58b17e41bbf325fb97fcc6d39deeef7a93a7dcb3978b1584a043a70511a4a2817ca58410f73743830e50b4ab9bd7846abd7f6826bd9b392bce322856029cb8a84b0eb6c330a9bbc5f08fdbeab1f08bb1828c726569802a5f9061544136c164d45d70723ac52eb448037c670a9b11ec3297972a031f60af503339b43f39ed68842f8a8d3ece66157711bb5a15e42ac83bd7e4722b1c5117928ccc483118ef6090f8fa5c218a96067706a9baa62a478f2ad7f39e26bcd554670f0960988406cef530be2a33863b0170e716176f33450a4f108cb62bbfd3191545',
        #'Authorization': 'b303a83cc69798cfe9589ec12e7c07f7486e78e838ae684fef868689ae3c2f6d9b67600e1b0801a3da92877521ee134e4ebe71f25f97410e70de46f02a1c7a91f54e1e4aae06099d1f07e5cc7680e6fb8b2ab59dc1a5e3d18301a9973ef5cd9d1cc7ec1076cbe6f9698ca3a2bb166d31b18680b9d18b320eb6e73c5f54bca47810d748b3d90df30f995d830cb4ef2f253e796b121de1ca1f43c487ed6a4e46d157df9007fbf249f2ee8e31ad09fbaa43d88b8e83760715f7b2978d2387116278b0c7f8a970938ffdba8549a490dde6143826a2c8ceae49221ec4a34f25062ab86cdbf44ec9e24a01a6c1046018ed0bb7b78546dd968a299f804e7069d12f158d2b7fb22322e7732a7554447168d9d7bbc8e6b6a6093115b47e7fb2cb87e1ee4cbeca0f2e9a2716537bea4aafd49eb77819730e408e3ea2676e9d4b76b812f73aa6790149fdd75a0df7a90657a1e2f2641985ea29362299d31d23ae2fee9b466cc2e0555b427ffda8f3d5f6c1a32fb668',
        'Authorization':'1264565c1caaa1259e414dc598798449daefa1909ddddfe9b39e6620fe3bfb94ef2f0e740f3550927fa81d6820d33063203f1f85d64cf220ec759632822ed4d21e814bfb941349a40bf47f86c6007d7ae5ec61c2abd8adf65168256213bd6d4053956806b91e9db09b5d17e73068f134596de460c1271887da5fd38deac732e39935a35061aa2a6be67d4f67a9fa012caa7e11061356cc877b6cd095e84ed2e0675616f1f6cbe785d6fe8bc06124b2e6a4b811b92ac82263c7a19db0d2a584485955018084e68e0833d8dcb19f24ae323a0c8e0fd40747480bf2702969cc2240dffb7667735dd7e0c3dab35ab4074edbed89e812e9957ef6224b272d89a29d7dea9c16407cb799f15f5af9fe5d5477e645c5212ea7854550b850a540d5b55ed9204a4a04bf68643e77a92aaa3f923022d696615b13cd36d53a298d4e81946ee7d14d7232d2381db4f7b311419b2dfa3534d1a5b3c0773eb314b0d6dc9e787ba78e2fc127baf216b4c4b17ad4441f9ef1',
        'Host': 'api.lit.live',
        'Content-Type' : '',
        'Content-Length' : '58461',
        'Connection': 'Keep-Alive',
        'Accept-Encoding': 'gzip',
        'User-Agent': 'okhttp/3.10.0'
    } 

headers2 = {

        'Accept-Encoding': 'gzip',
		'User-Agent': 'Lit/1.1.1 (com.masterplan.lit; build:1.1.1; iOS 11.4.1) Alamofire/4.6.0',
		'Content-Type': 'application/json',
		#'Authorization': '89d84756c7f42832eb69950fd56003211c7f3f35dd4b29f4b5760fff8c6906c8569756c32786b20ef537c212b4c6de8b436ea44d88447a03fcd038b48dd5517bbab9aabfc223ca1841f2e8912621beeb2a9b7dac3351299ba2be578116b594c1e39bbb97463285f54da62bbe7527eeefa3a505cc4ca12dcede729fc980e81dffe19df8c64233171d4226304dc0555f8cbbd6805b3e4ebe58b17e41bbf325fb97fcc6d39deeef7a93a7dcb3978b1584a043a70511a4a2817ca58410f73743830e50b4ab9bd7846abd7f6826bd9b392bce322856029cb8a84b0eb6c330a9bbc5f08fdbeab1f08bb1828c726569802a5f9061544136c164d45d70723ac52eb448037c670a9b11ec3297972a031f60af503339b43f39ed68842f8a8d3ece66157711bb5a15e42ac83bd7e4722b1c5117928ccc483118ef6090f8fa5c218a96067706a9baa62a478f2ad7f39e26bcd554670f0960988406cef530be2a33863b0170e716176f33450a4f108cb62bbfd3191545'
        #'Authorization': 'b303a83cc69798cfe9589ec12e7c07f7486e78e838ae684fef868689ae3c2f6d9b67600e1b0801a3da92877521ee134e4ebe71f25f97410e70de46f02a1c7a91f54e1e4aae06099d1f07e5cc7680e6fb8b2ab59dc1a5e3d18301a9973ef5cd9d1cc7ec1076cbe6f9698ca3a2bb166d31b18680b9d18b320eb6e73c5f54bca47810d748b3d90df30f995d830cb4ef2f253e796b121de1ca1f43c487ed6a4e46d157df9007fbf249f2ee8e31ad09fbaa43d88b8e83760715f7b2978d2387116278b0c7f8a970938ffdba8549a490dde6143826a2c8ceae49221ec4a34f25062ab86cdbf44ec9e24a01a6c1046018ed0bb7b78546dd968a299f804e7069d12f158d2b7fb22322e7732a7554447168d9d7bbc8e6b6a6093115b47e7fb2cb87e1ee4cbeca0f2e9a2716537bea4aafd49eb77819730e408e3ea2676e9d4b76b812f73aa6790149fdd75a0df7a90657a1e2f2641985ea29362299d31d23ae2fee9b466cc2e0555b427ffda8f3d5f6c1a32fb668'
        'Authorization':'1264565c1caaa1259e414dc598798449daefa1909ddddfe9b39e6620fe3bfb94ef2f0e740f3550927fa81d6820d33063203f1f85d64cf220ec759632822ed4d21e814bfb941349a40bf47f86c6007d7ae5ec61c2abd8adf65168256213bd6d4053956806b91e9db09b5d17e73068f134596de460c1271887da5fd38deac732e39935a35061aa2a6be67d4f67a9fa012caa7e11061356cc877b6cd095e84ed2e0675616f1f6cbe785d6fe8bc06124b2e6a4b811b92ac82263c7a19db0d2a584485955018084e68e0833d8dcb19f24ae323a0c8e0fd40747480bf2702969cc2240dffb7667735dd7e0c3dab35ab4074edbed89e812e9957ef6224b272d89a29d7dea9c16407cb799f15f5af9fe5d5477e645c5212ea7854550b850a540d5b55ed9204a4a04bf68643e77a92aaa3f923022d696615b13cd36d53a298d4e81946ee7d14d7232d2381db4f7b311419b2dfa3534d1a5b3c0773eb314b0d6dc9e787ba78e2fc127baf216b4c4b17ad4441f9ef1'
    }


resp = requests.get('https://api.lit.live/me/stories', headers=headers2)
mith_list = json.loads(resp.text)		
resp.close()
print('找到 ' + str(len(mith_list)) + ' 張照片')

need_to_upload = 24 - len(mith_list)
print('需要上傳 '+ str(need_to_upload) + ' 張照片' )

if need_to_upload !=0 :

    for i in range(1, need_to_upload+1) :

        picno = random.randint(1, 138)
        picpath = 'pic/'+'pic ('+str(picno)+').jpg'
        picname = 'pic ('+str(picno)+').jpg'

        file_payload = {
        
                'story': (picname, open(picpath, 'rb'), 'image/jpeg')
            }

        m = MultipartEncoder(file_payload)
        headers['Content-Type'] = m.content_type
    
        r = requests.post("https://api.lit.live/stories", headers = headers, data = m)
        if r.status_code == 200 :
            print('已成功上傳第 '+str(i)+' 張照片 檔名' + picname)
            time.sleep(5)
        else :
            print('上傳 '+ picpath + ' 失敗')
            time.sleep(5)
else :
    print('不用上傳照片')

